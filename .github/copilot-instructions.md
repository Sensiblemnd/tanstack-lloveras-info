## Quick Orientation

- **Purpose:** This repo is a small TanStack Start + TanStack Router example. The app is client-first React (React 19) with Vite + TypeScript and some Tailwind utilities. Key runtime pieces are the router and React Start registration (see generated route tree).

## How to run

- Install: `npm install`.
- Dev server: `npm run dev` (runs `vite dev`).
- Build: `npm run build` (runs `vite build && tsc --noEmit`).
- Preview: `npm run preview`.

## Important files and where to look

- Router bootstrap: [src/router.tsx](src/router.tsx#L1-L40) — creates the TanStack router using the generated `routeTree`.
- Generated routes: [src/routeTree.gen.ts](src/routeTree.gen.ts) — AUTO-GENERATED by TanStack Router. Do not edit this file; it will be overwritten. Use the file-based routes under `src/routes/` to change routing.
- Root route and HTML shell: [src/routes/__root.tsx](src/routes/__root.tsx#L1-L200) — contains `createRootRoute`, global head tags (uses `HeadContent`), `Scripts`, and the devtools.
- Middleware examples: [src/utils/loggingMiddleware.tsx](src/utils/loggingMiddleware.tsx#L1-L200) — shows `createMiddleware` with `.client()` and `.server()` handlers and the `sendContext` pattern.
- SEO helper: [src/utils/seo.ts](src/utils/seo.ts#L1-L200) — small helper returning meta tags used by the root route.

## Project-specific conventions (what an agent must know)

- File-based routes are canonical. Add or edit files under `src/routes/` to change routes; the generator emits `src/routeTree.gen.ts` from those files. Example patterns:
  - Parameter routes use `$` in filenames: `src/routes/users.$userId.tsx` → `/users/:userId` (see generated mapping in `routeTree.gen.ts`).
  - Route with literal dots are encoded in filenames with bracketed characters, e.g. `customScript[.]js.ts` maps to `/customScript.js` (see [src/routeTree.gen.ts](src/routeTree.gen.ts)).
  - Pathless layouts use folders starting with `_` (example: `src/routes/_pathlessLayout/`).

- The generated `routeTree.gen.ts` is excluded from lint/formatting in this template; do not attempt to format or hand-edit it.

- Head/meta is specified per-route via the `head` property (see `createRootRoute` usage in [src/routes/__root.tsx](src/routes/__root.tsx#L1-L120)). Use the `seo` utility to keep tags consistent.

- Middleware uses `createMiddleware({ type: 'function' })` with `.client()` and `.server()` handlers and may chain via `.middleware([...])`. Middleware passes data via `context` and `sendContext` (see [src/utils/loggingMiddleware.tsx](src/utils/loggingMiddleware.tsx)).

## Common quick tasks and examples for an agent

 - Add a new page route: create `src/routes/foo.tsx` exporting `Route` (follow patterns in `src/routes/index.tsx`). Run `npm run dev` — the route tree regenerates.
- Add a dynamic route: `src/routes/posts.$postId.tsx` and implement loader/children as needed; check the updated types in `src/routeTree.gen.ts`.
- Update global head tags: edit `head` in [src/routes/__root.tsx](src/routes/__root.tsx#L1-L120); prefer the `seo` helper for consistent meta.

## Tooling & build notes

 - TypeScript is enforced in the build step (`tsc --noEmit` as part of `npm run build`). Keep types clean.
- Vite is the dev server. React plugin and `vite-tsconfig-paths` are present — expect path aliases like `~`/`@` (see `tsconfig.json`) and imports like `~/utils/seo`.

## Docs

- TanStack Router overview: https://tanstack.com/router/latest/docs/framework/react/overview
- TanStack Start overview: https://tanstack.com/start/latest/docs/framework/react/overview

## What not to do
- Do not run any npm commands without permission
- Do not edit `src/routeTree.gen.ts` — changes will be lost and types will diverge.
- Do not assume server-side code is Node-first: this repo is client-first with optional SSR hooks via React Start. Only change server-side behavior if you understand `@tanstack/react-start` registration.

## Agent responsibilities and PR checklist

- Run the build/type-check locally before committing: `npm run build` (this runs `tsc --noEmit`). If tests exist, run them and ensure they pass.
- Run lint/format if present before committing (this repo has `eslint` as a devDependency; run project-specific lint commands if added).
- When changing runtime behavior or route files, run the app locally (`npm run dev`) and verify affected example routes load correctly.
- Update documentation for any feature or API changes (place docs in `docs/` when present, and update example routes).
- Do not edit generated files such as `src/routeTree.gen.ts` — change the source files under `src/routes/` instead.
- Follow existing patterns for middleware (`createMiddleware` usage) and `head` metadata (`seo` helper) when adding routes or cross-cutting behavior.
- If the repository later becomes a monorepo/workspace that requires `pnpm`, follow the repo's root documentation; otherwise prefer `npm` for dev commands in this project.

## Where to ask if uncertain

- Files that illustrate behavior: [src/router.tsx](src/router.tsx), [src/routeTree.gen.ts](src/routeTree.gen.ts), [src/routes/__root.tsx](src/routes/__root.tsx), and `src/utils/*`.

---
If anything here is unclear or you'd like more examples (routing, middleware, or a minimal new route PR patch), tell me which area to expand.
